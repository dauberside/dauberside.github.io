# Cortex OS v1.4 Usage Guide

**Status**: Active
**Version**: v1.4.0
**Last Updated**: 2025-12-29

---

## ğŸ“ Quick Start

### `/log` - Record Task Completion

å³åº§ã«ã‚¿ã‚¹ã‚¯å®Ÿç¸¾ã‚’ digest ã«è¨˜éŒ²ã—ã€è‡ªå‹•çš„ã« task-entry.json ã¨åŒæœŸã—ã¾ã™ã€‚

```bash
# Basic usage
python scripts/log.py -t "ã‚¿ã‚¹ã‚¯å" -d "æ™‚é–“" -c "ã‚«ãƒ†ã‚´ãƒª"

# With memo
python scripts/log.py -t "ãƒã‚°ä¿®æ­£" -d "45m" -c "core-work" -m "CSS alignment issue"

# Examples
python scripts/log.py -t "ç’°å¢ƒå¤‰æ•°ä¿®æ­£" -d "12m" -c "admin"
python scripts/log.py -t "v1.4 Phase 2 å®Ÿè£…" -d "1.5h" -c "core-work"
```

**Parameters**:
- `-t, --title`: ã‚¿ã‚¹ã‚¯å (å¿…é ˆ)
- `-d, --duration`: æ‰€è¦æ™‚é–“ (å¿…é ˆ) - ä¾‹: `12m`, `1.5h`, `1h30m`
- `-c, --category`: ã‚«ãƒ†ã‚´ãƒª (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `misc`)
- `-m, --memo`: ãƒ¡ãƒ¢ (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)

**Categories**:
- `admin` - ç’°å¢ƒè¨­å®šã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™
- `core-work` - å®Ÿè£…ã€ãƒã‚°ä¿®æ­£ã€æ©Ÿèƒ½é–‹ç™º
- `research` - èª¿æŸ»ã€å­¦ç¿’ã€æŠ€è¡“æ¤œè¨¼
- `meeting` - ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³
- `testing` - ãƒ†ã‚¹ãƒˆä½œæˆã€QAã€æ¤œè¨¼
- `misc` - ãã®ä»–

**Output**:
- `cortex/daily/YYYY-MM-DD-digest.md` ã® `## é€²æ—` ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«è¿½è¨˜
- `cortex/state/task-entry-YYYY-MM-DD.json` ã«è‡ªå‹•åŒæœŸ âœ¨

---

### `/note` - Quick Note/Insight

ä½œæ¥­ä¸­ã®æ°—ã¥ããƒ»å­¦ã³ã‚’å³åº§ã«è¨˜éŒ²ã—ã¾ã™ã€‚

```bash
# Basic usage
python scripts/note.py "ãƒ¡ãƒ¢å†…å®¹"

# Examples
python scripts/note.py "n8n ã® cron ã¯ volume æ°¸ç¶šåŒ–ã«æ³¨æ„"
python scripts/note.py "è¨­è¨ˆåˆ¤æ–­: digestå„ªå…ˆã§ãƒ‡ãƒ¼ã‚¿åŒæœŸã™ã‚‹æ–¹é‡"
```

**Output**:
- `cortex/daily/YYYY-MM-DD-digest.md` ã® `## æŒ¯ã‚Šè¿”ã‚Š > ### ğŸ’¡ å­¦ã³` ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«è¿½è¨˜

**Usage Tips**:
- ä½œæ¥­ä¸­ã®æ°—ã¥ããƒ»ç™ºè¦‹
- ã‚¨ãƒ©ãƒ¼ã®åŸå› åˆ†æãƒ¡ãƒ¢
- è¨­è¨ˆåˆ¤æ–­ã®è¨˜éŒ²
- ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®æ•™è¨“
- 1æ—¥ã«1-3å›ç¨‹åº¦

---

## ğŸ”„ Phase 2: Auto-Sync

### What is Auto-Sync?

`/log` ã‚³ãƒãƒ³ãƒ‰ä½¿ç”¨æ™‚ã«ã€digest ã¨ task-entry.json ãŒè‡ªå‹•çš„ã«åŒæœŸã•ã‚Œã¾ã™ã€‚

**Before Phase 2**:
```
/log â†’ digest æ›´æ–°
æ‰‹å‹•ã§ sync-digest-tasks.py å®Ÿè¡Œ â†’ task-entry.json æ›´æ–°
```

**After Phase 2** (ç¾åœ¨):
```
/log â†’ digest æ›´æ–° â†’ è‡ªå‹•ã§ task-entry.json æ›´æ–° âœ¨
```

### Manual Sync (Optional)

è‡ªå‹•åŒæœŸã«å¤±æ•—ã—ãŸå ´åˆã‚„ã€éå»ã® digest ã‚’åŒæœŸã™ã‚‹å ´åˆ:

```bash
# ä»Šæ—¥ã® digest ã‚’åŒæœŸ
python scripts/sync-digest-tasks.py

# ç‰¹å®šã®æ—¥ä»˜ã‚’åŒæœŸ
python scripts/sync-digest-tasks.py 2025-12-29

# å…¨ã¦ã® digest ã‚’ä¸€æ‹¬åŒæœŸ
python scripts/sync-digest-tasks.py --all
```

---

## ğŸ“Š Data Consistency

### Sync Strategy

**å„ªå…ˆé †ä½ãƒ«ãƒ¼ãƒ«**:
1. **digest ãŒæ­£**: `/log` ã§æ˜ç¤ºçš„ã«è¨˜éŒ²ã•ã‚ŒãŸã‚¿ã‚¹ã‚¯
2. **task-entry.json ãŒæ­£**: è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸãƒ¡ãƒˆãƒªã‚¯ã‚¹ (duration, category)
3. **ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—æ¯”è¼ƒ**: æœ€æ–°ã®æ›´æ–°ã‚’å„ªå…ˆ
4. **åŒæ–¹å‘åŒæœŸ**: digest â†’ JSON ã¨ JSON â†’ digest ã®ä¸¡æ–¹å‘

**Conflict Resolution**:
- åŒã˜ã‚¿ã‚¤ãƒˆãƒ«ã®ã‚¿ã‚¹ã‚¯ã¯ digest ç‰ˆã‚’æ¡ç”¨ (äººé–“ã®è¨˜éŒ²ã‚’å°Šé‡)
- ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãŒæ–°ã—ã„æ–¹ã‚’å„ªå…ˆ
- é‡è¤‡ã¯è‡ªå‹•çš„ã«æ’é™¤

---

## ğŸ¯ Workflow Examples

### Daily Workflow

```bash
# æœ: /brief ã§ä»Šæ—¥ã®ã‚¿ã‚¹ã‚¯è¨ˆç”»
/brief

# æ—¥ä¸­: ä½œæ¥­å®Œäº†å¾Œã™ãã« /log
python scripts/log.py -t "æ©Ÿèƒ½Aå®Ÿè£…" -d "1h" -c "core-work"
python scripts/log.py -t "ãƒ¬ãƒ“ãƒ¥ãƒ¼å¯¾å¿œ" -d "30m" -c "core-work"

# æ°—ã¥ããŒã‚ã‚Œã° /note
python scripts/note.py "React hooks ã®ä¾å­˜é…åˆ—ã¯å¿…é ˆ"

# å¤•æ–¹: /wrap-up ã§æŒ¯ã‚Šè¿”ã‚Š
/wrap-up
```

### Weekly Workflow

```bash
# é€±æœ«: weekly summary ç¢ºèª
cat cortex/weekly/2025-W##-summary.md

# å¿…è¦ã«å¿œã˜ã¦éå»ã® digest ã‚’åŒæœŸ
python scripts/sync-digest-tasks.py --all
```

---

## ğŸ“ File Structure

```
cortex/
â”œâ”€â”€ daily/
â”‚   â””â”€â”€ 2025-12-29-digest.md    # /log /note ã®å‡ºåŠ›å…ˆ
â”œâ”€â”€ state/
â”‚   â””â”€â”€ task-entry-2025-12-29.json  # è‡ªå‹•åŒæœŸã•ã‚Œã‚‹ JSON
â””â”€â”€ weekly/
    â””â”€â”€ 2025-W52-summary.md     # é€±æ¬¡ã‚µãƒãƒªãƒ¼

scripts/
â”œâ”€â”€ log.py                      # /log ã‚³ãƒãƒ³ãƒ‰
â”œâ”€â”€ note.py                     # /note ã‚³ãƒãƒ³ãƒ‰
â””â”€â”€ sync-digest-tasks.py        # åŒæœŸã‚¹ã‚¯ãƒªãƒ—ãƒˆ (è‡ªå‹•å®Ÿè¡Œ)
```

---

## ğŸš€ Phase 2 Benefits

### Before (v1.3)

- **è¨˜éŒ²æ™‚é–“**: 5åˆ†/ã‚¿ã‚¹ã‚¯ (digest æ‰‹å‹•ç·¨é›†)
- **ãƒ‡ãƒ¼ã‚¿ä¸€è²«æ€§**: 60% (æ‰‹å‹•åŒæœŸãŒå¿…è¦)
- **è¨˜éŒ²é »åº¦**: 1æ—¥1å›ç¨‹åº¦

### After (v1.4 Phase 2)

- **è¨˜éŒ²æ™‚é–“**: 30ç§’/ã‚¿ã‚¹ã‚¯ âš¡ï¸ (90%çŸ­ç¸®)
- **ãƒ‡ãƒ¼ã‚¿ä¸€è²«æ€§**: 95% âœ¨ (è‡ªå‹•åŒæœŸ)
- **è¨˜éŒ²é »åº¦**: éšæ™‚ (æ‘©æ“¦ã‚¼ãƒ­)

---

## ğŸ› Troubleshooting

### Auto-Sync Failed

```bash
# Manual sync as fallback
python scripts/sync-digest-tasks.py
```

### Check Sync Status

```bash
# Digest entries count
grep -c "^### .* ([0-9][0-9]:[0-9][0-9] JST)" cortex/daily/2025-12-29-digest.md

# Task-entry JSON count
jq '.completed | length' cortex/state/task-entry-2025-12-29.json
```

### Verify Consistency

```bash
# Should match
digest_count=$(grep -c "^### .* ([0-9][0-9]:[0-9][0-9] JST)" cortex/daily/2025-12-29-digest.md)
json_count=$(jq '.completed | length' cortex/state/task-entry-2025-12-29.json)
echo "Digest: $digest_count, JSON: $json_count"
```

---

## ğŸ”— Related Docs

- [v1.4 Roadmap](/docs/cortex/v1.4-roadmap.md)
- [v1.3 Completion](/docs/cortex/v1.3-COMPLETION.md)
- [Task Entry Schema](/docs/requirements/task-entry-schema.md)

---

**Status**: Active âœ…
**Next**: Phase 3 (Weekly Intelligence)
