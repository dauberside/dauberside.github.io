# Cortex OS v1.2 Roadmap

**テーマ**: "自律性（Autonomy）" の強化

v1.1 で情報の統合が完成。ここからは OS 自身が流れを制御するレベルへ。

---

## 0. 現状（v1.1）

| レイヤー | 状態 | 内容 |
|---------|------|------|
| 日次ループ | ⭐ 完成 | /brief → /wrap-up → tomorrow.json |
| 週次ループ | ⭐ 完成 | Recipe 11 Weekly Summary |
| 中期記憶 | ⭐ 完成 | daily/weekly ディレクトリ |
| 実行系 | ⭐ 完成 | /init, /brief, /wrap-up |
| タスク管理 | ⭐ 完成 | TODO.md + Task Manager |

v1.2 の目的は **"人の介入をさらに減らす"** こと。

---

## 🎯 v1.2 の3本柱

### ① 完全自律化 — Cron 自動ループ

**目的**: 人間が /wrap-up を忘れても OS が回り続ける状態を作る。

**内容**:
- ✅ 22:00 → n8n が /wrap-up を実行し tomorrow.json を保存（Recipe 13）
- ✅ 07:59 → n8n が Obsidian Daily Note を確認（Recipe 03）
- ✅ 08:00 → n8n が /brief を呼び出し（Recipe 10 v1.2 データブリッジ）
- ⏳ Slack DM に朝のブリーフィング自動送信（Recipe 03 Slack 統合待ち）

**成果**: 「目覚めた瞬間に今日の3タスクが DM に届いている」状態。

**現状（2025-11-28）**:
- ✅ Recipe 13（Nightly Wrap-up）稼働中（22:00 自動実行）
- ✅ Recipe 10 v1.2（TODO.md Auto-sync）稼働中（08:05 自動実行、5タグシステム）
- ✅ tomorrow.json → brief データブリッジ完成
- ⏳ Slack 通知は Recipe 03 に統合予定

---

### ② 情報モデル統一 — JSON スキーマ正規化

**目的**: digest / brief / wrap-up がバラバラの形式 → OS が理解できる単一フォーマットへ。

**仕様**: `cortex/schema/task-entry.json`

```json
{
  "date": "2025-11-20",
  "tasks": [ ... ],
  "completed": [ ... ],
  "carryover": [ ... ],
  "reflection": "...",
  "tomorrow_candidates": [ ... ]
}
```

**成果**:
- データの変換コストがゼロに
- 全てのレイヤーで一貫した処理が可能
- 将来の「月次 Summary」「AI 教師データ生成」が簡単に

**現状（2025-11-28）**:
- ⏳ スキーマ設計未着手
- ✅ tomorrow.json は既に一部構造化されている（generated_at, source_date, tomorrow_candidates）
- 💡 次のステップ: daily digest、weekly summary も同じスキーマに統一

---

### ③ AI Interface 強化 — 新コマンド群

**目的**: Cortex OS を「単なる自動化」ではなく「思考のインターフェース」へ進化させる。

| コマンド        | 説明                                      | 例                                     | 状態 |
| ----------- | --------------------------------------- | ------------------------------------- | ---- |
| `/ask`      | Daily Digest + TODO + Weekly を文脈にした Q&A | 「今週のペースは問題ない？」                        | ⏳ 未着手 |
| `/reflect`  | 日次の気づきを自動抽出・文章化                         | 「今日の気づきをまとめて」                         | ⏳ 未着手 |
| `/plan`     | 長期プロジェクトの分解とタスク化                        | 「来週の開発計画書を作って」                        | ⏳ 未着手 |
| `/diagnose` | Cortex OS 全体のヘルスチェック                    | Obsidian API, n8n, digest 欠損, TODO 構造 | ⏳ 未着手 |

**現状（2025-11-28）**:
- ⏳ 全コマンド未着手
- 💡 優先度: `/diagnose` > `/ask` > `/reflect` > `/plan`
- 💡 `/diagnose` はシステム安定性のため最優先推奨

---

## 📅 スケジュール

### Week 1
- Cron 自動化（/wrap-up / /brief） → Recipe 13
- tomorrow.json 読み込み確認
- Slack DM 自動通知実装

### Week 2
- 情報モデル統一（task-entry.json）
- daily/weekly のスキーマ適用
- /brief / /wrap-up の内部データを統一

### Week 3
- /ask /reflect /plan /diagnose 実装
- それぞれ .claude/commands に追加
- /init に統合

### Week 4
- 1週間の安定稼働確認
- v1.2 Final 化
- ADR-0006 更新
- README に v1.2 Architecture 図を追加

---

## 🚀 v1.2 完成イメージ

- 朝起きたら Slack に **今日の3タスク + 所要時間 + バッファ** が自動で届いている
- 22時に自動で wrap-up 実行 → 明日の種が保存される
- digest / TODO / weekly は全て同じ JSON 形式
- `/ask` に "今週やるべきことまとめて" と入れるだけで長期計画が出る
- `/diagnose` に "状態見て" と言えば Cortex OS が全体をチェック

**これが完全な "自律動作する第二の脳" の形。**

---

## 次のアクション候補

1. Recipe 13（Cron 自動 Wrap-up）を実装する
2. 情報スキーマ（task-entry.json）を設計する
3. /ask /plan /diagnose コマンドの仕様書を作る
4. README に v1.2 ロードマップを書き足す

---

Created: 2025-11-19


---

## Backlog — Future Enhancements

軽量な改善案（優先度低・いつでも OK）

### Slack Nightly Wrap-up メッセージ改善
- Reflection 一行を追加（一目で今日の雰囲気が分かる）
- 実行時間を追加
- 可読性向上（「完了: 0 / 未完了: 3」形式に）

### /brief 優先度ロジック調整
- 「朝は軽めモード」を検討
- 例: 軽タスク 2-3 個 + 深い仕事はオプション
- 現状「深い仕事 1 個まで」から調整

---

## ✅ Definition of Done (v1.2)

### 必須条件（Minimum Viable Autonomy）

- [x] **Recipe 13 稼働**: 22:00 自動 wrap-up 実行、tomorrow.json 生成
- [x] **Recipe 10 v1.2 稼働**: 08:05 自動 TODO.md 更新、5タグシステム（⚡🚧⏳🎯👁️）
- [x] **データブリッジ完成**: tomorrow.json → brief 読み込み → TODO.md 反映
- [ ] **Slack 通知統合**: 朝の brief 結果を Slack DM に自動送信
- [ ] **1週間の安定稼働**: Recipe 13 + 10 が7日間連続で正常動作

### 推奨条件（Full Autonomy）

- [ ] **情報モデル統一**: task-entry.json スキーマ設計完了
- [ ] **daily/weekly スキーマ適用**: 既存 digest ファイルを新スキーマに移行
- [ ] **`/diagnose` コマンド実装**: Cortex OS 全体のヘルスチェック機能
- [ ] **`/ask` コマンド実装**: 文脈を持った Q&A 機能

### オプション（Advanced Interface）

- [ ] **`/reflect` コマンド実装**: 日次の気づき自動抽出
- [ ] **`/plan` コマンド実装**: 長期プロジェクト分解機能
- [ ] **月次 Summary**: weekly summary を集約した月次レポート自動生成
- [ ] **AI 教師データ生成**: 統一スキーマから学習データ自動生成

---

## 📊 Progress Summary（2025-11-28 時点）

**達成率**:
- ① 完全自律化: **75%** (3/4 完了、Slack 通知のみ残り)
- ② 情報モデル統一: **10%** (tomorrow.json 構造化のみ)
- ③ AI Interface 強化: **0%** (全コマンド未着手)

**全体進捗**: **28%** (3/11 必須・推奨条件完了)

**次のマイルストーン**:
1. Slack 通知統合（Recipe 03 改修）- 1-2時間
2. 1週間の安定稼働確認 - 7日間
3. `/diagnose` コマンド実装 - 2-3時間

---

Updated: 2025-11-28
